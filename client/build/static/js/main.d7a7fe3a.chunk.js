(this.webpackJsonpletsplay=this.webpackJsonpletsplay||[]).push([[0],{140:function(e,t,n){},170:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},268:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){},303:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),s=n(14),i=n.n(s),o=(n(230),n(32)),l=n(24),d=(n(231),n(36)),u=n(11),j=n(9),p=n.n(j),b=n(17),m=n(10),h=n(7),O=n(23),v=n.n(O),f=n(18),g=function(){return localStorage.getItem("token")&&localStorage.removeItem("token"),{type:"SIGN_OUT"}},x=function(e){return function(){var t=Object(b.a)(p.a.mark((function t(n){var a,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={method:"post",url:"/api/user/login",headers:{"Content-Type":"application/json"},data:e},t.next=4,v()(a);case 4:if(c=t.sent,localStorage.setItem("token",c.data.token),r=JSON.parse(atob(c.data.token.split(".")[1])).user,!c||1!=c.data.response){t.next=11;break}n({type:"SIGN_IN",payload:r}),t.next=13;break;case 11:throw console.log(c.data.message),new Error(c.data.message);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),f.b.error(t.t0.response.data);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},y=function(e){try{return function(){var t=Object(b.a)(p.a.mark((function t(n){var a,c,r,s,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=localStorage.getItem("token"),a=c?{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}:{"Content-Type":"application/json"},r={method:"post",url:"/api/user/signup",headers:a,data:e},t.next=5,v()(r);case 5:s=t.sent,localStorage.setItem("token",s.data.token),i=JSON.parse(atob(s.data.token.split(".")[1])).user,n({type:"SIGN_IN",payload:i});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}catch(t){console.log(t)}},E=function(e){return{type:"SIGN_IN",payload:e}},w=function(e){return function(){var t=Object(b.a)(p.a.mark((function t(n){var a,c,r,s,i,o,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/api/nominatim/getLatLng/".concat(e[0],"/").concat(e[1]),c={method:"get",url:a},t.prev=2,t.next=5,v()(c);case 5:r=t.sent,(s=r.data).display_name?((i=s.display_name.split(",")).splice(4,2),i.splice(2,1),o=i.map((function(e,t){return 0===t||t===i.length-1?e:e+","})),l=o.join(""),n({type:"SETLATLNG",payload:{coords:e,address:l}})):n({type:"SETLATLNG",payload:{coords:e,address:""}}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0.message),f.b.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},k=function(){return function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"get",url:"/api/getEvents",headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,v()(n);case 4:(a=e.sent)&&!0===a.data.response&&(t({type:"getEvents",payload:a}),(c=localStorage.getItem("token"))&&(r=JSON.parse(atob(c.split(".")[1])).user,t({type:"SIGN_IN",payload:r}))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),f.b.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(b.a)(p.a.mark((function t(n){var a,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("token"),t.prev=1,c={method:"get",url:"/api/getMyEvents",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,v()(c);case 5:(r=t.sent)&&!0===r.data.response&&n({type:"toggleMyEvents",payload:{response:r,toggle:e}}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),f.b.error(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(b.a)(p.a.mark((function t(n){var a,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:"get",url:"/api"+"/getEvent?id=".concat(e),headers:{"Content-Type":"application/json"}},t.prev=1,t.next=4,v()(a);case 4:(c=t.sent)&&!0===c.data.response&&n({type:"selectEvent",payload:c.data._doc}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),f.b.error(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return{type:"selectEvent",payload:e}},C=n(374),T=n(343),_=n(341),L=n(372),M=n(345),D=n(344),A=n(123),F=n.n(A),B=n(66),P=n(80),z=n(339),R=Object(P.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var U=function(e){var t=Object(c.useState)({username:"",password:""}),n=Object(m.a)(t,2),r=n[0],s=n[1],i=R(),o=Object(h.b)(),j=Object(l.f)(),O=Object(h.c)((function(e){return e.user}));Object(c.useEffect)((function(){localStorage.getItem("token")&&!0===O.signedUp&&j.push("/")}));var v=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),o(x(r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){s(Object(u.a)(Object(u.a)({},r),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(a.jsxs)(z.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(_.a,{}),Object(a.jsxs)("div",{className:i.paper,children:[Object(a.jsx)(C.a,{className:i.avatar,children:Object(a.jsx)(F.a,{})}),Object(a.jsx)(B.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsxs)("form",{className:i.form,noValidate:!0,onSubmit:v,children:[Object(a.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:f,value:r.username}),Object(a.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:f,value:r.password}),Object(a.jsx)(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:i.submit,children:"Sign In"}),Object(a.jsx)(D.a,{container:!0,children:Object(a.jsx)(D.a,{item:!0,children:Object(a.jsx)(M.a,{href:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]})]})},W=n(371),Y=Object(P.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),color:"white",backgroundColor:"#3F51B5","&:hover":{backgroundColor:"#303F9F"}}}}));function G(){var e=Object(h.b)(),t=Object(l.f)(),n=Object(h.c)((function(e){return e.user})),r=Object(c.useState)({username:"",password:"",email:""}),s=Object(m.a)(r,2),i=s[0],o=s[1],j=Y();Object(c.useEffect)((function(){localStorage.getItem("token")&&!0===n.signedUp&&t.push("/")}),[n]);var O=function(){var t=Object(b.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault();try{e(y(Object(u.a)(Object(u.a)({},i),{},{signedUp:!0})))}catch(a){console.log(a.message)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(e){o(Object(u.a)(Object(u.a)({},i),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(a.jsxs)(z.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(_.a,{}),Object(a.jsxs)(W.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},className:j.paper,children:[Object(a.jsx)(C.a,{className:j.avatar,sx:{m:1,bgcolor:"secondary.main"},children:Object(a.jsx)(F.a,{})}),Object(a.jsx)(B.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(a.jsxs)(W.a,{className:j.form,component:"form",noValidate:!0,onSubmit:O,sx:{mt:3},children:[Object(a.jsxs)(D.a,{container:!0,spacing:2,children:[Object(a.jsx)(D.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{autoComplete:"Username",name:"username",required:!0,fullWidth:!0,id:"username",label:"Username",autoFocus:!0,value:i.username,onChange:v})}),Object(a.jsx)(D.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:i.email,onChange:v})}),Object(a.jsx)(D.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:i.password,onChange:v})})]}),Object(a.jsx)(T.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},className:j.submit,children:"Sign Up"}),Object(a.jsx)(D.a,{container:!0,justifyContent:"flex-end",children:Object(a.jsx)(D.a,{item:!0,children:Object(a.jsx)(M.a,{href:"/login",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})}var V=n(306),J=n(347),q=n(346),H=n(191),$=n.n(H);var X=function(e){var t=Object(l.f)(),n=Object(h.b)();return Object(a.jsxs)(V.a,{style:e.selected?{borderLeft:"solid 3px #3f51b4"}:null,onClick:function(){n(S(e.eventData))},children:[Object(a.jsx)("input",{type:"hidden","data-id":e.eventData._id}),Object(a.jsx)(q.a,{children:Object(a.jsx)(C.a,{children:Object(a.jsx)($.a,{})})}),Object(a.jsx)(J.a,{primary:e.eventData.name,secondary:e.eventData.description,style:{maxHeight:"46px",overflow:"hidden",width:"70%",paddingRight:"20px"}}),Object(a.jsx)(T.a,{size:"small",color:"primary",onClick:function(a){var c;a.preventDefault(),c=e.eventData,n(S(c)),t.push("/event-information?id=".concat(c._id))},children:"Learn More"})]})};var K=n(342),Q=(n(261),Object(P.a)((function(e){return{root:{width:"100%",maxWidth:930}}})));var Z=function(){var e=Object(c.useRef)(null),t=Q(),n=Object(h.b)(),r=Object(h.c)((function(e){return e.eventsInfo}));return console.log(r),Object(c.useEffect)((function(){n(k())}),[]),Object(c.useEffect)((function(){if(e.current){var t=Array.from(e.current.children).find((function(e){return e.children[0]&&e.children[0].getAttribute("data-id")===r.selectedEvent._id}));t&&t.scrollIntoView({behavior:"smooth",block:"start"})}}),[r]),Object(a.jsx)("div",{className:"events",children:Object(a.jsx)(K.a,{ref:e,className:t.root,children:!1===r.toggleMyEvents?r.events.length>0?r.events.map((function(e){return e.name.toLowerCase().includes(r.searchEvent)&&e.public?Object(a.jsx)(X,{eventData:e,selected:e._id===r.selectedEvent._id},e._id):""})):Object(a.jsx)("h1",{className:"no-events-message",children:"There are no events"}):r.myEvents.map((function(e){return e.name.toLowerCase().includes(r.searchEvent)&&Object(a.jsx)(X,{eventData:e,selected:e._id===r.selectedEvent._id},e._id)}))})})},ee=n(6),te=n(377),ne=(n(262),n(351)),ae=n(352),ce=(n(170),n(348)),re=n(349),se=n(26),ie={customMarkerIcon:Object(se.divIcon)({html:'<span style="'.concat("\n  background-color: #3F51B4;\n  width: 2.5rem;\n  height: 2.5rem;\n  display: block;\n  left: -1.5rem;\n  top: -1.5rem;\n  position: relative;\n  border-radius: 1.5rem 1.5rem 0;\n  transform: rotate(45deg);\n  border: 1px solid #FFFFFF",'">')}),selectedCustomMarkerIcon:Object(se.divIcon)({html:'<span style="'.concat("\n  background-color: #2bb437;\n  border: solid 2px black;\n  width: 2.5rem;\n  height: 2.5rem;\n  display: block;\n  left: -1.5rem;\n  top: -1.5rem;\n  position: relative;\n  border-radius: 2.5rem 2.5rem 0;\n  transform: rotate(45deg);\n  border: 1px solid #FFFFFF",'">')})},oe=function(){var e=Object(ce.a)(),t=Object(h.c)((function(e){return e.eventsInfo.selectedEvent.location})),n=t.latitude,r=t.longitude;return Object(c.useEffect)((function(){e.setView([n,r],14)})),Object(a.jsx)(re.a,{position:[n,r],icon:ie.customMarkerIcon})};function le(){return(le=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("https://ipapi.co/json/");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var de=function(){return le.apply(this,arguments)},ue=function(e){var t=Object(h.b)(),n=Object(h.c)((function(e){return e.eventsInfo.createEventLocation})),r=n.lat,s=n.lng,i=Object(ce.a)(),o=Object(ce.b)({click:function(n){console.log(n),t(w([n.latlng.lat,n.latlng.lng])),e.setLoading(!0)},locationfound:function(e){t(w([e.latlng.lat,e.latlng.lng])),i.setView([e.latlng.lat,e.latlng.lng],16)},locationerror:function(e){return Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:(t=e.sent)&&i.setView([t.latitude,t.longitude],10);case 4:case"end":return e.stop()}}),e)})))()}});return Object(c.useEffect)((function(){o.locate()}),[]),Object(c.useEffect)((function(){e.setLoading(!1)}),[r]),Object(a.jsx)(re.a,{position:[r,s],icon:ie.customMarkerIcon})},je=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.eventsInfo.selectedEvent.location})),n=t.latitude,r=t.longitude,s=Object(h.c)((function(e){return e.eventsInfo.createEventLocation})),i=s.lat,o=s.lng,l=Object(ce.a)();return Object(ce.b)({click:function(t){e(w([t.latlng.lat,t.latlng.lng])),l.setView([t.latlng.lat,t.latlng.lng])}}),Object(c.useEffect)((function(){l.setView([n,r],16),e(w([n,r]))}),[]),Object(a.jsx)(re.a,{position:[i,o],icon:ie.customMarkerIcon})},pe=n(350),be=n(192),me=n.n(be),he=(n(264),n(30)),Oe=n.n(he),ve=n(129);Oe()().format();var fe=function(){var e=Object(h.c)((function(e){return e.eventsInfo})),t=Object(c.useState)([0,0,0,0]),n=Object(m.a)(t,2),r=(n[0],n[1],Object(h.b)()),s=Object(ce.a)(),i=Object(ce.b)({locationfound:function(e){s.setView([e.latlng.lat,e.latlng.lng],16)},locationerror:function(e){return Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:(t=e.sent)&&s.setView([t.latitude,t.longitude],10);case 4:case"end":return e.stop()}}),e)})))()}});return Object(c.useEffect)((function(){i.locate()}),[]),Object(c.useEffect)((function(){Object.keys(e.selectedEvent)>0&&s.setView([e.selectedEvent.location.latitude,e.selectedEvent.location.longitude],17)}),[e.selectedEvent]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(me.a,{iconCreateFunction:function(e){var t=e.getChildCount();return e.getAllChildMarkers().map((function(e){return e.options.isSelected})).includes("true")?Object(se.divIcon)({html:"<div>\n              <span>".concat(t,"</span>\n            </div>"),className:"marker-cluster selected"}):Object(se.divIcon)({html:"<div>\n              <span>".concat(t,"</span>\n            </div>"),className:"marker-cluster"})},spiderLegPolylineOptions:{weight:0,opacity:0},children:[Array.isArray(e.events)&&!1===e.toggleMyEvents&&e.events.map((function(t,n){if(t&&t.public)return Object(a.jsx)(re.a,{"data-id":t._id,icon:t._id===e.selectedEvent._id?ie.selectedCustomMarkerIcon:ie.customMarkerIcon,isSelected:t._id===e.selectedEvent._id?"true":"false",position:[t.location.latitude,t.location.longitude],eventHandlers:{click:function(){r(S(t))}},children:Object(a.jsxs)(pe.a,{children:[Object(a.jsx)("span",{children:t.name}),Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:Oe()(t.date).format("dddd, MMMM Do YYYY")}),Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:t.startTime})]})},"event-".concat(n))})),Array.isArray(e.events)&&!0===e.toggleMyEvents&&e.myEvents.map((function(t,n){if(t)return Object(a.jsx)(re.a,{"data-id":t._id,icon:t._id===e.selectedEvent._id?ie.selectedCustomMarkerIcon:ie.customMarkerIcon,isSelected:t._id===e.selectedEvent._id?"true":"false",position:[t.location.latitude,t.location.longitude],eventHandlers:{click:function(){r(S(t))}},children:Object(a.jsxs)(pe.a,{children:[Object(a.jsx)("span",{children:t.name}),Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:Oe()(t.date).format("dddd, MMMM Do YYYY")}),Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:t.startTime})]})},"event-".concat(n))}))]},Object(ve.v4)())})},ge=n(353),xe=function(e){var t=e.type,n=Object(c.useState)(!1),r=Object(m.a)(n,2),s=r[0],i=r[1];return Object(a.jsxs)("div",{className:"map",children:[Object(a.jsxs)(ne.a,{center:[0,0],zoom:2,children:[Object(a.jsx)(ae.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),function(){switch(t){case"displayLocation":return Object(a.jsx)(oe,{});case"setLocation":return Object(a.jsx)(ue,{setLoading:i});case"editLocation":return Object(a.jsx)(je,{});case"cluster":return Object(a.jsx)(fe,{})}}()]}),s?Object(a.jsx)(ge.a,{color:"primary"}):null]})},ye=Object(ee.a)((function(e){return{root:{width:28,height:16,padding:0,display:"flex"},switchBase:{padding:2,color:e.palette.error.light,"&$checked":{transform:"translateX(12px)",color:e.palette.common.white,"& + $track":{opacity:1,backgroundColor:e.palette.primary.main,borderColor:e.palette.primary.main}}},thumb:{width:12,height:12,boxShadow:"none"},track:{border:"1px solid ".concat(e.palette.grey[500]),borderRadius:8,opacity:1,backgroundColor:e.palette.common.white},checked:{}}}))(te.a);var Ee=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.eventsInfo.toggleMyEvents}));return Object(l.f)(),Object(c.useEffect)((function(){e(I(t))}),[]),Object(a.jsxs)("div",{className:"dashboard",children:[Object(a.jsxs)("div",{className:"switchWrapper",children:[Object(a.jsx)("span",{style:{fontSize:"12px",padding:"0 10px"},children:"My Events"}),Object(a.jsx)(ye,{checked:!t,onChange:function(n){localStorage.getItem("token")?e(I(!t)):f.b.warning("You currently don't have any events")},name:"publicEvent"}),Object(a.jsx)("span",{style:{fontSize:"12px",padding:"0 10px"},children:"Public Events"})]}),Object(a.jsxs)("div",{className:"list-and-map",children:[Object(a.jsx)(Z,{}),Object(a.jsx)("div",{className:"map-wrapper",children:Object(a.jsx)(xe,{type:"cluster"})})]})]})},we=n(25),ke=n(354),Ie=n(378),Ne=(n(268),n(130));Oe()().format();var Se=function(){var e=Object(c.useRef)(null),t=Object(l.f)(),n=Object(h.b)(),r=Object(c.useState)(!0),s=Object(m.a)(r,2),i=s[0],o=s[1],d=Object(h.c)((function(e){return e.eventsInfo})).createEventLocation,j=Object(c.useState)(Oe()()),O=Object(m.a)(j,2),g=O[0],x=O[1],y=Object(c.useState)(Oe()()),E=Object(m.a)(y,2),w=E[0],I=E[1],N=Object(c.useState)(d.address),S=Object(m.a)(N,2),C=S[0],_=S[1],M=Object(c.useState)(!0),A=Object(m.a)(M,2),F=A[0],P=A[1],z=Object(c.useState)({eventNameError:!1,sportNameError:!1,descriptionError:!1}),R=Object(m.a)(z,2),U=R[0],W=R[1];Object(c.useEffect)((function(){_(d.address),P(!1)}),[d]);var Y=function(){var a=Object(b.a)(p.a.mark((function a(c){var r,s,o,l,u;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c.preventDefault(),!e.current.eventName.value||!e.current.description.value){a.next=19;break}return r={name:e.current.eventName.value,location:{address:d.address,latitude:d.lat,longitude:d.lng},description:e.current.description.value,startTime:w.format("LT"),date:g,public:i},o=localStorage.getItem("token"),s=o?{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}:{"Content-Type":"application/json"},l={method:"post",data:r,url:"/api/createEvent",headers:s},a.prev=6,a.next=9,v()(l);case 9:(u=a.sent)&&!0===u.data.response?(u.data.token&&localStorage.setItem("token",u.data.token),n(k()),f.b.success("Event has been created"),t.push("/")):console.log(u),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(6),console.log(a.t0),f.b.error("Something went wrong. Please try again later");case 17:a.next=20;break;case 19:W({eventNameError:!0,sportNameError:!0,descriptionError:!0});case 20:case"end":return a.stop()}}),a,null,[[6,13]])})));return function(e){return a.apply(this,arguments)}}(),G=Object(ee.a)((function(e){return{root:{width:28,height:16,padding:0,display:"flex"},switchBase:{padding:2,color:e.palette.error.light,"&$checked":{transform:"translateX(12px)",color:e.palette.primary.main,"& + $track":{opacity:1,backgroundColor:e.palette.common.white,borderColor:e.palette.primary.main}}},thumb:{width:12,height:12,boxShadow:"none"},track:{border:"1px solid ".concat(e.palette.grey[500]),borderRadius:8,opacity:1,backgroundColor:e.palette.common.white},checked:{}}}))(te.a);return Object(a.jsxs)("div",{className:"create-event",children:[Object(a.jsxs)("form",{ref:e,children:[Object(a.jsxs)(we.a,{utils:Ne.a,children:[Object(a.jsx)(B.a,{variant:"h4",style:{margin:"0 0 40px 0"},gutterBottom:!0,children:"Create Event"}),Object(a.jsxs)(D.a,{container:!0,spacing:3,children:[Object(a.jsx)(D.a,{item:!0,xs:12,children:Object(a.jsxs)(D.a,{component:"label",container:!0,alignItems:"center",spacing:1,children:[Object(a.jsx)(D.a,{item:!0,children:"Private"}),Object(a.jsx)(D.a,{item:!0,children:Object(a.jsx)(G,{checked:i,onChange:function(e){o(!i)},name:"publicEvent"})}),Object(a.jsx)(D.a,{item:!0,children:"Public"})]})}),Object(a.jsx)(D.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{required:!0,id:"eventName",name:"eventName",error:U.eventNameError,label:"Event Name",fullWidth:!0,autoComplete:"given-name",onChange:function(e){e.target.value&&W(Object(u.a)(Object(u.a)({},U),{},{eventNameError:!1}))},onBlur:function(e){e.target.value?W(Object(u.a)(Object(u.a)({},U),{},{eventNameError:!1})):W(Object(u.a)(Object(u.a)({},U),{},{eventNameError:!0}))}})}),Object(a.jsx)(D.a,{item:!0,xs:6,children:Object(a.jsx)(ke.a,{margin:"normal",id:"date-picker-dialog",label:"Date",format:"MM/DD/yyyy",value:g,onChange:function(e){x(e)},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(D.a,{item:!0,xs:6,children:Object(a.jsx)(Ie.a,{margin:"normal",id:"time-picker",label:"Start Time",value:w,onChange:function(e){I(e)},KeyboardButtonProps:{"aria-label":"change time"}})}),Object(a.jsxs)(D.a,{item:!0,xs:12,children:[Object(a.jsx)(L.a,{required:!0,id:"address",name:"address",label:"Address",fullWidth:!0,autoComplete:"address",value:C,onChange:function(e){_(e.target.value)},onBlur:function(e){P(!0),n(function(e){return function(){var t=Object(b.a)(p.a.mark((function t(n){var a,c,r,s,i,o,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/api/nominatim/setLatLng/".concat(e),c={method:"get",url:a},t.prev=2,t.next=5,v()(c);case 5:r=t.sent,(s=r.data)[0].display_name?((i=s[0].display_name.split(",")).splice(4,2),i.splice(2,1),o=i.map((function(e,t){return 0===t||t===i.length-1?e:e+","})),l=o.join(""),n({type:"SETLATLNG",payload:{coords:[s[0].lat,s[0].lon],address:l}})):n({type:"SETLATLNG",payload:{coords:[0,0],address:""}}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),f.b.error(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}(C))}}),F?Object(a.jsx)(ge.a,{color:"primary"}):null]}),Object(a.jsx)(D.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{required:!0,id:"description",name:"description",error:U.descriptionError,label:"Event Description",fullWidth:!0,multiline:!0,onChange:function(e){e.target.value&&W(Object(u.a)(Object(u.a)({},U),{},{descriptionError:!1}))},onBlur:function(e){e.target.value?W(Object(u.a)(Object(u.a)({},U),{},{descriptionError:!1})):W(Object(u.a)(Object(u.a)({},U),{},{descriptionError:!0}))}})})]})]}),Object(a.jsx)(T.a,{variant:"contained",style:{margin:"40px 0 0 0",backgroundColor:"#3f51b4",color:"rgb(240, 240, 240)"},onClick:Y,children:"Create Event"})]}),Object(a.jsx)("div",{className:"mapHolder",children:Object(a.jsx)(xe,{type:"setLocation"})})]})},Ce=n(193),Te=(n(140),n(373));function _e(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var Le=Object(P.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),display:"flex",flexDirection:"column","@media (max-width: 1000px)":{width:200}}}}));function Me(e){var t=Le(),n=r.a.useState(_e),s=Object(m.a)(n,1)[0],i=r.a.useState(!1),o=Object(m.a)(i,2),l=o[0],d=o[1],u=r.a.useState(!1),j=Object(m.a)(u,2),O=j[0],g=j[1],x=Object(h.b)(),y=Object(c.useRef)(null),E=function(){d(!1)},w=Object(a.jsxs)("div",{style:s,className:t.paper,children:[Object(a.jsx)("h2",{id:"simple-modal-title",children:"What name should we use?"}),Object(a.jsx)(L.a,{error:O,id:"standard-basic",label:"username",inputRef:y,inputProps:{maxLength:15}}),Object(a.jsx)("button",{style:{marginTop:"20px"},onClick:function(){if(y.current.value){var t={participantsName:y.current.value,id:e.eventId};x(function(e){return function(){var t=Object(b.a)(p.a.mark((function t(n){var a,c,r,s,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=localStorage.getItem("token"),a=c?{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}:{"Content-Type":"application/json"},r={method:"PUT",url:"/api/joinEvent",headers:a,data:e},t.prev=3,t.next=6,v()(r);case 6:(s=t.sent)&&!0===s.data.response?(s.data.token&&(localStorage.setItem("token",s.data.token),i=JSON.parse(atob(s.data.token.split(".")[1])).user,n({type:"SIGN_IN",payload:i})),n({type:"selectEvent",payload:s.data._doc}),f.b.success("You have joined this event as ".concat(e.participantsName))):f.b.warn(s.data.message),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0),f.b.error("Something went wrong! Please try again later");case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()}(t)),e.setJoined(!0),E()}else g(!0)},children:"Join Event"})]});return Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:e.btnStyle,type:"button",onClick:function(){d(!0)},disabled:e.disabled,children:e.children}),Object(a.jsx)(Te.a,{open:l,onClose:E,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:w})]})}var De=n(356),Ae=n(196),Fe=n.n(Ae),Be=n(197),Pe=n.n(Be),ze=n(73),Re=n.n(ze);var Ue=function(e){var t=e.eventInfo,n=Re.a.getSocket(),r=Object(h.c)((function(e){return e.user})),s=Object(c.useState)(t.selectedEvent.participants),i=Object(m.a)(s,2),o=i[0],l=i[1],d=Object(h.b)();function u(e,n){var a;d((a={participantId:e.currentTarget.getAttribute("data-id"),selectedEventId:t.selectedEvent._id,name:n},function(){var e=Object(b.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"delete",url:"/api/removeParticipant",headers:{"Content-Type":"application/json"},data:a},e.prev=1,e.next=4,v()(n);case 4:(c=e.sent)&&!0===c.data.response?(t({type:"selectEvent",payload:c.data.updatedEvent}),f.b.success("".concat(a.name+" has"||!1," left this event"))):f.b.warn(c.data.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f.b.error("Something went wrong! Please try again later");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))}return Object(c.useEffect)((function(){return n.on("update participants",(function(e){l(e)})),function(){n.off("update participants")}}),[]),Object(a.jsxs)("div",{className:"participants",children:[Object(a.jsx)("h3",{children:"Participants"}),Object(a.jsx)(K.a,{component:"nav","aria-label":"contacts",children:o&&o.map((function(e,n){return Object(a.jsx)("div",{children:Object(a.jsxs)(V.a,{style:{backgroundColor:"white"},children:[Object(a.jsx)(De.a,{children:Object(a.jsx)(Fe.a,{})}),Object(a.jsx)(J.a,{primary:e.name}),r.id.includes(e.userId)||r.id===t.selectedEvent.creator?Object(a.jsx)("div",{className:"remove-icon-wrapper","data-id":e.userId,onClick:function(t){u(t,e.name)},children:Object(a.jsx)(Pe.a,{})}):null]})},n)}))})]})},We=n(357),Ye=n(359),Ge=n(361),Ve=n(363),Je=n(365),qe=n(358),He=n(360),$e=n(362),Xe=n(364),Ke=n(366);n(300);var Qe=function(e){var t=e.eventId,n="https://www.letsplay.gdn/event-information?id=".concat(t);return Object(c.useRef)(null),Object(a.jsx)("div",{className:"share",children:Object(a.jsxs)("div",{className:"share-button-wrapper",children:[Object(a.jsx)(We.a,{url:n,children:Object(a.jsx)(qe.a,{size:45,round:!0})}),Object(a.jsx)(Ye.a,{url:n,children:Object(a.jsx)(He.a,{size:45,round:!0})}),Object(a.jsx)(Ge.a,{url:n,children:Object(a.jsx)($e.a,{size:45,round:!0})}),Object(a.jsx)(Ve.a,{url:n,children:Object(a.jsx)(Xe.a,{size:45,round:!0})}),Object(a.jsx)(Je.a,{url:n,children:Object(a.jsx)(Ke.a,{size:45,round:!0})})]})})},Ze=n(204),et=n(305),tt=n(367),nt=n(368),at=n(199),ct=n.n(at),rt=Object(P.a)({chatSection:{width:"100%",height:"80vh"},headBG:{backgroundColor:"#e0e0e0"},borderRight500:{borderRight:"1px solid #e0e0e0"},messageArea:{height:"70vh",overflowY:"auto"},bubble:{position:"relative",margin:"10px auto",width:"98%",height:"auto"},inputAndSubmit:Object(d.a)({display:"flex",justifyContent:"center",alignItems:"center",padding:"0 20px"},"@media (max-width:500px)",{padding:"0 30px 0 10px"}),chatBox:{display:"flex",justifyContent:"space-evenly",flexDirection:"column"}}),st=function(e){var t=e.selectedEvent,n=e.userInfo,r=Object(c.useRef)(),s=Re.a.getSocket(),i=rt(),o=Object(c.useState)([]),l=Object(m.a)(o,2),d=l[0],u=l[1],j=Object(c.useState)(""),p=Object(m.a)(j,2),b=p[0],h=p[1];Object(c.useEffect)((function(){s.on("message",(function(e){u((function(t){return[].concat(Object(Ze.a)(t),[e])}))})),s.on("denied",(function(e){f.b.warning(e)})),u(t.messages)}),[]),Object(c.useEffect)((function(){r.current.scrollTo(0,r.current.scrollHeight)}),[r.current,d]);var O=function(e){e.preventDefault(),s.emit("sendMessage",{eventId:t._id,message:b,user:n,time:Oe()().format("hh:mm A")}),h("")};return Object(a.jsx)("div",{className:"chat",children:Object(a.jsx)(D.a,{container:!0,component:et.a,className:i.chatSection,children:Object(a.jsxs)(D.a,{className:i.chatBox,item:!0,xs:12,children:[Object(a.jsx)(K.a,{className:"".concat(i.messageArea," message-list"),ref:r,children:d.map((function(e){return Object(a.jsx)(V.a,{style:e.user===(null===n||void 0===n?void 0:n.userId)?{backgroundColor:"#ECF2FB"}:{},className:i.bubble,children:Object(a.jsxs)(D.a,{container:!0,children:[Object(a.jsx)(D.a,{item:!0,xs:5,sm:2,children:Object(a.jsx)(J.a,{primaryTypographyProps:{style:{fontSize:".8rem"}},align:"left",primary:e.name,secondary:e.time})}),Object(a.jsx)(D.a,{item:!0,xs:7,sm:10,children:Object(a.jsx)(J.a,{primaryTypographyProps:{style:{fontSize:".8rem"}},align:"left",primary:e.message})})]})},Object(ve.v4)())}))}),Object(a.jsx)(tt.a,{}),Object(a.jsxs)(D.a,{container:!0,className:i.inputAndSubmit,children:[Object(a.jsx)(D.a,{item:!0,xs:11,children:Object(a.jsx)("form",{onSubmit:O,children:Object(a.jsx)(L.a,{id:"outlined-basic-email",label:"Type Something",fullWidth:!0,value:b,onChange:function(e){h(e.target.value)},autoComplete:"off"})})}),Object(a.jsx)(D.a,{xs:1,align:"right",onClick:O,children:Object(a.jsx)(nt.a,{color:"primary","aria-label":"add",size:"medium",children:Object(a.jsx)(ct.a,{})})})]})]})})})};Oe()().format();var it=function(e){var t=Object(c.useState)(!1),n=Object(m.a)(t,2),r=n[0],s=n[1],i=Object(h.c)((function(e){return e.user}));return Object(c.useEffect)((function(){var t=e.eventInfo.selectedEvent.participants.find((function(e){return i.id.includes(e.userId)}));-1!==t&&s(t)}),[e.eventInfo]),Object(a.jsx)(a.Fragment,{children:e.eventInfo.selectedEvent&&Object.keys(e.eventInfo.selectedEvent).length>0?Object(a.jsxs)("div",{className:"body-container",children:[Object(a.jsx)("div",{className:"map-wrapper",children:Object(a.jsx)(xe,{type:"displayLocation"})}),Object(a.jsxs)("div",{className:"event-details",children:[Object(a.jsx)("p",{className:"description-wrapper",children:e.eventInfo.selectedEvent.description}),Object(a.jsxs)("div",{className:"time-public-wrapper",children:[Object(a.jsxs)("div",{className:"address-wrapper",children:["Address:",Object(a.jsxs)("span",{children:[" ",e.eventInfo.selectedEvent.location.address]})]}),Object(a.jsxs)("div",{className:"date-wrapper",children:["Date:",Object(a.jsxs)("span",{children:[" ",Oe()(e.eventInfo.selectedEvent.date).format("dddd, MMMM Do YYYY")]})]}),Object(a.jsxs)("div",{className:"time-wrapper",children:["Start time:",Object(a.jsxs)("span",{children:[" ",e.eventInfo.selectedEvent.startTime]})]}),Object(a.jsx)("div",{className:"public-wrapper",children:Object(a.jsxs)("span",{children:["This is a",e.eventInfo.selectedEvent.public?Object(a.jsx)("span",{style:{color:"blue"},children:" public "}):Object(a.jsx)("span",{style:{color:"red"},children:" private "}),"event"]})})]})]}),Object(a.jsxs)("div",{className:"button-wrapper",children:[Object(a.jsx)(Me,{btnStyle:"success-btn",eventId:e.eventInfo.selectedEvent._id,disabled:r,setJoined:s,children:"JOIN"}),e.admin?Object(a.jsxs)("div",{className:"admin-btns",children:[Object(a.jsx)(T.a,{onClick:e.handleEdit,children:"Edit"}),Object(a.jsx)(T.a,{className:"warning-btn",onClick:e.handleDelete,children:"Delete"})]}):""]}),Object(a.jsx)(st,{selectedEvent:e.eventInfo.selectedEvent,userInfo:r})]}):""})};var ot=function(e){var t=Object(h.c)((function(e){return e.eventsInfo})),n=Object(h.b)(),r=Object(l.f)(),s=Object(c.useState)(e.eventInfo.selectedEvent.public),i=Object(m.a)(s,2),o=i[0],d=i[1],u=Object(h.c)((function(e){return e.eventsInfo})).createEventLocation,j=Object(c.useState)(Oe()()),O=Object(m.a)(j,2),f=(O[0],O[1],Object(c.useState)(Oe()(e.eventInfo.selectedEvent.startTime,"HH:mm A"))),g=Object(m.a)(f,2),x=g[0],y=g[1],E=Object(c.useState)(e.eventInfo.selectedEvent.name),w=Object(m.a)(E,2),k=w[0],I=w[1],S=Object(c.useState)(e.eventInfo.selectedEvent.description),C=Object(m.a)(S,2),_=C[0],M=C[1];Object(c.useEffect)((function(){0===Object.keys(t.selectedEvent).length&&n(N(r.location.search.split("=")[1]))}),[]);var D=function(){var t=Object(b.a)(p.a.mark((function t(){var a,c,r,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={id:e.eventInfo.selectedEvent._id,name:k,location:{address:e.eventInfo.selectedEvent.location.address,latitude:u.lat,longitude:u.lng},description:_,startTime:x.format("LT"),public:o},c=localStorage.getItem("token"),r={method:"put",data:a,url:"/api/updateEvent",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.prev=3,t.next=6,v()(r);case 6:(s=t.sent)&&!0===s.data.response&&(n(N(s.data._doc._id)),e.toggleEditMode()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}(),A=Object(ee.a)((function(e){return{root:{width:28,height:16,padding:0,margin:10},switchBase:{padding:2,color:e.palette.error.light,"&$checked":{transform:"translateX(12px)",color:e.palette.primary.main,"& + $track":{opacity:1,backgroundColor:e.palette.common.white,borderColor:e.palette.primary.main}}},thumb:{width:12,height:12,boxShadow:"none"},track:{border:"1px solid ".concat(e.palette.grey[500]),borderRadius:8,opacity:1,backgroundColor:e.palette.common.white},checked:{}}}))(te.a);return Object(a.jsx)(a.Fragment,{children:e.eventInfo.selectedEvent&&Object.keys(e.eventInfo.selectedEvent).length>0?Object(a.jsx)("div",{className:"body-container",children:Object(a.jsxs)(we.a,{utils:Ne.a,children:[Object(a.jsx)("div",{children:Object(a.jsx)(L.a,{required:!0,id:"eventName",name:"eventName",label:"Event Name",value:k,onChange:function(e){I(e.target.value)},fullWidth:!0,autoComplete:"given-name"})}),Object(a.jsx)(L.a,{required:!0,id:"description",name:"description",label:"Event Description",value:_,onChange:function(e){M(e.target.value)},fullWidth:!0,multiline:!0}),Object(a.jsxs)("div",{className:"time-public-wrapper",children:[Object(a.jsx)("div",{className:"time-wrapper",children:Object(a.jsx)(Ie.a,{margin:"normal",id:"time-picker",label:"Start Time",value:x,onChange:function(e){y(e)},KeyboardButtonProps:{"aria-label":"change time"}})}),Object(a.jsxs)("div",{className:"public-wrapper",children:[Object(a.jsx)("span",{children:"Private"}),Object(a.jsx)(A,{checked:o,onChange:function(e){d(!o)},name:"publicEvent"}),Object(a.jsx)("span",{children:"Public"})]})]}),Object(a.jsx)("div",{className:"map-wrapper",children:Object(a.jsx)(xe,{type:"editLocation"})}),Object(a.jsxs)("div",{className:"button-wrapper",children:[Object(a.jsx)(T.a,{onClick:D,children:"Update"}),Object(a.jsx)(T.a,{className:"warning-btn",onClick:function(){e.toggleEditMode()},children:"Cancel"})]})]})}):""})};var lt=function(){var e=Re.a.getSocket(),t=Object(h.c)((function(e){return e.eventsInfo})),n=Object(h.c)((function(e){return e.user})),r=Object(c.useState)(!1),s=Object(m.a)(r,2),i=s[0],o=s[1],d=Object(c.useState)(!1),u=Object(m.a)(d,2),j=u[0],O=u[1],g=Object(h.b)(),x=Object(l.f)();Object(c.useEffect)((function(){0===Object.keys(t.selectedEvent).length&&g(N(x.location.search.split("=")[1]))}),[]),Object(c.useEffect)((function(){t.selectedEvent._id&&e.emit("join room",t.selectedEvent._id),n.id.includes(t.selectedEvent.creator)?O(!0):O(!1)}),[t]);var y=function(){o(!i)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Ce.a,{children:[Object(a.jsx)("meta",{charSet:"utf-8"}),Object(a.jsx)("meta",{name:"description",content:"Inviting you to join "+t.selectedEvent.name+" with Lets Play"})]}),t.selectedEvent&&Object.keys(t.selectedEvent).length>0?Object(a.jsxs)("div",{className:"eventInformation",children:[Object(a.jsxs)("div",{className:"event-header",children:[Object(a.jsx)("span",{children:t.selectedEvent.name}),Object(a.jsx)(Qe,{eventId:x.location.search.split("=")[1]})]}),Object(a.jsx)("div",{className:"sidebar",children:Object(a.jsx)("div",{className:"participants-wrapper",children:Object(a.jsx)(Ue,{eventInfo:t})})}),i?Object(a.jsx)(ot,{eventInfo:t,toggleEditMode:y}):Object(a.jsx)(it,{eventInfo:t,admin:j,handleEdit:y,handleDelete:function(){var e;g((e={id:t.selectedEvent._id},function(){var t=Object(b.a)(p.a.mark((function t(n){var a,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("token"),c={method:"delete",url:"/api/deleteEvent",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e},t.prev=2,t.next=5,v()(c);case 5:(r=t.sent)&&!0===r.data.response?(n({type:"deleteEvent",payload:r.data._doc}),f.b.success("You have deleted ".concat(r.data.name))):f.b.warn(r.data.message),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0),f.b.error("Something went wrong! Please try again later");case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}())),x.push("/")}})]}):""]})},dt=(n(301),n(21)),ut=n(370),jt=n(355),pt=n(307),bt=n(375),mt=n(369),ht=n(205),Ot=n(201),vt=n.n(Ot),ft=n(202),gt=n.n(ft),xt=n(150),yt=n.n(xt),Et=n(200),wt=n.n(Et),kt=Object(P.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(d.a)({display:"none"},e.breakpoints.up("sm"),{display:"flex"}),search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(dt.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(dt.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:e.spacing(3),width:"auto"},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(d.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(d.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(d.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),houseIcon:Object(d.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"})}}));var It=function(){var e=Object(h.b)(),t=Object(l.f)(),n=(Object(h.c)((function(e){return e.eventsInfo})),Object(h.c)((function(e){return e.user}))),c=kt(),s=r.a.useState(null),i=Object(m.a)(s,2),d=i[0],u=(i[1],r.a.useState(null)),j=Object(m.a)(u,2),p=j[0],b=j[1],O=(Boolean(d),Boolean(p)),v=function(){b(null)},f=function(){t.push("/create-event")},x=function(){e(g())},y=(ht.a,mt.a,mt.a,"primary-search-account-menu-mobile"),E=Object(a.jsxs)(ht.a,{anchorEl:p,anchorOrigin:{vertical:"top",horizontal:"right"},id:y,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:O,onClose:v,children:[Object(a.jsx)(mt.a,{onClick:f,children:"Create Event"}),n.signedUp?[Object(a.jsx)(yt.a,{}),Object(a.jsxs)("span",{children:[" ",n.username," "]}),Object(a.jsx)(T.a,{onClick:x,children:"Logout"})]:[Object(a.jsx)(o.b,{to:"/login",children:Object(a.jsx)(mt.a,{children:"Login"})}),Object(a.jsx)(o.b,{to:"/signup",children:Object(a.jsx)(mt.a,{children:"Sign Up"})})]]});return Object(a.jsx)("div",{className:"navbar",children:Object(a.jsxs)("div",{className:c.grow,children:[Object(a.jsx)(ut.a,{position:"static",children:Object(a.jsxs)(jt.a,{children:[Object(a.jsx)(B.a,{variant:"h6",noWrap:!0,children:Object(a.jsxs)(o.b,{to:"/",style:{textDecoration:"none",color:"white"},children:[Object(a.jsx)("span",{className:c.title,children:"LetsPlay!"}),Object(a.jsx)(wt.a,{className:c.houseIcon})]})}),Object(a.jsxs)("div",{className:c.search,children:[Object(a.jsx)("div",{className:c.searchIcon,children:Object(a.jsx)(vt.a,{})}),Object(a.jsx)(bt.a,{placeholder:"Search\u2026",onChange:function(t){e({type:"SEARCH_EVENT",payload:t.target.value.toLowerCase()})},classes:{root:c.inputRoot,input:c.inputInput},inputProps:{"aria-label":"search"}})]}),Object(a.jsx)("div",{className:c.grow}),Object(a.jsx)("div",{className:"user-icon-or-login "+c.sectionDesktop,children:n.signedUp?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(yt.a,{}),Object(a.jsxs)("span",{children:[" ",n.username," "]}),Object(a.jsx)(T.a,{onClick:x,children:"Logout"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(o.b,{to:"/login",children:"Login"}),Object(a.jsx)(o.b,{to:"/signup",children:"Sign Up"})]})}),Object(a.jsx)("div",{className:c.sectionDesktop,children:"/create-event"!=t.location.pathname?Object(a.jsx)(T.a,{variant:"contained",color:"primary",onClick:f,children:"Create Event"}):""}),Object(a.jsx)("div",{className:c.sectionMobile,children:Object(a.jsx)(pt.a,{"aria-label":"show more","aria-controls":y,"aria-haspopup":"true",onClick:function(e){b(e.currentTarget)},color:"inherit",children:Object(a.jsx)(gt.a,{})})})]})}),E]})})};n(302);Re.a.init();var Nt=function(){var e=Object(h.b)();return v.a.defaults.withCredentials=!0,Object(c.useEffect)((function(){var t=localStorage.getItem("token");if(t){var n=JSON.parse(atob(t.split(".")[1]));Date.now()>=1e3*n.exp?localStorage.removeItem("token"):e(E(n.user))}}),[]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(f.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(a.jsxs)(o.a,{children:[Object(a.jsx)(It,{}),Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:"/",children:Object(a.jsx)(Ee,{})}),Object(a.jsx)(l.a,{exact:!0,path:"/login",children:Object(a.jsx)(U,{})}),Object(a.jsx)(l.a,{exact:!0,path:"/signup",children:Object(a.jsx)(G,{})}),Object(a.jsx)(l.a,{path:"/create-event",children:Object(a.jsx)(Se,{})}),Object(a.jsx)(l.a,{path:"/event-information",children:Object(a.jsx)(lt,{})})]})]})]})},St=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,381)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},Ct=n(82),Tt=n(203),_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",signedUp:!1,id:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return{username:t.payload.username,id:t.payload._id,signedUp:t.payload.signedUp};case"SIGN_OUT":return{signedUp:!1,username:"",id:""};default:return e}},Lt={events:[],selectedEvent:{},myEvents:[],toggleMyEvents:!1,createEventLocation:{lat:0,lng:0,address:""},searchEvent:""},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_EVENT":return Object(u.a)(Object(u.a)({},e),{},{searchEvent:t.payload});case"SETLATLNG":return Object(u.a)(Object(u.a)({},e),{},{createEventLocation:{lat:t.payload.coords[0],lng:t.payload.coords[1],address:t.payload.address}});case"getEvents":return Object(u.a)(Object(u.a)({},e),{},{events:t.payload.data.events});case"selectEvent":return Object(u.a)(Object(u.a)({},e),{},{selectedEvent:t.payload});case"deleteEvent":return Object(u.a)({},e);case"toggleMyEvents":return Object(u.a)(Object(u.a)({},e),{},{toggleMyEvents:t.payload.toggle,myEvents:t.payload.response.data.myEvents});default:return e}},Dt=Object(Ct.c)({user:_t,eventsInfo:Mt}),At=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,Object(Ct.d)(Dt,Object(Ct.a)(Tt.a)));i.a.render(Object(a.jsx)(h.a,{store:At,children:Object(a.jsx)(Nt,{})}),document.getElementById("root")),St()},73:function(e,t,n){var a,c=n(269);e.exports={init:function(){return a=c("/")},getSocket:function(){return a}}}},[[303,1,2]]]);
//# sourceMappingURL=main.d7a7fe3a.chunk.js.map